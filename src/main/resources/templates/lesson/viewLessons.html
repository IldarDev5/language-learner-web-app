<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title tiles:fragment="title">View Lessons</title>
</head>
<body>
    <div tiles:fragment="content">
        <script type="text/javascript" src="/scripts/lessons.js"></script>

        <form method="post" id="removeLessonForm">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        </form>

        <h2 th:text="|View lessons of cluster ${language1} => ${language2}|">View lessons</h2>
        <a th:href="@{/lessons/create(clusterId=${param.clusterId})}">Create a lesson</a><br /><br />

        <!--@thymesVar id="lessons" type="java.util.List<ru.ildar.languagelearner.database.domain.Lesson>"-->
        <th:block th:each="lesson : ${lessons}" th:object="${lesson}">
            <h3 th:text="*{lessonName}">Lesson 1</h3>
            <p th:text="*{description}">Full description</p>
            <p class="post-footer align-right">
                <span th:text="|*{translationsCount} pair(s) of sentences|">25 pairs of sentences</span>
                <a th:href="'javascript:deleteLesson(\'' + *{lessonId} + '\',\'' + ${param.page[0]} + '\');'"
                   class="delete">Delete</a>
                <a th:href="@{/lessons/edit(lessonId=*{lessonId})}" class="readmore">Edit lesson</a>
                <a th:href="@{/lessons/take(lessonId=*{lessonId})}">Take lesson</a>
                <span class="date" th:text="*{#dates.format(addDate, 'dd/MM/yyyy hh:mm')}">
                    13/10/2015 10:00
                </span>
            </p>
        </th:block>
        <div th:if="${lessons.size() == 0}"><i>No lessons here</i></div>

        <!--@thymesVar id="pagesCount" type="java.lang.Integer"-->
        <th:block th:each="pg : ${#numbers.sequence(1, pagesCount)}">
            <th:block th:switch="${pg}">
                <b th:case="${param.page[0]}" th:text="${pg}">1</b>
                <a th:case="*" th:text="${pg}"
                   th:href="@{/lessons/viewLessons(clusterId=${param.clusterId}, page=${param.page})}">2</a>
            </th:block>
        </th:block>
    </div>
</body>
</html>